/*!
 * nbb-anime-statistics - v0.0.3 - 2018-01-25
 * Copyright (c) 2018 Lu√≠s Nabais <dextro@nonsensebb.com>
 * Licensed MIT
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.year=t():e.year=t()}("undefined"!=typeof self?self:this,function(){return webpackJsonp_object_Object_([0],{264:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){u()}function u(){var e=a();l("genres",e).then(function(e){console.debug(e),i(_,e),c(e)}),l("themes",e).then(function(e){console.debug(e),i(L,e),f(e)}),g(e),s(e).then(function(t){console.debug(t),p(t,parseInt(e.key,10))})}function a(){var e=S.querySelectorAll('[value="'+S.value+'"]')[0];if(e)return{key:e.value}}function l(e,t){return A.default.DB.getYearData(e,t.key).then(d(e+"-year-data"))}function s(e){return A.default.DB.getTypes(e.key).then(d("types-year-data"))}function d(e){return function(t){var o=[].concat(t.rows||[]),n=A.default.generateColors(o.length,e);return o.sort(function(e,t){return t.value-e.value}).map(function(e,t){return{label:e.key[1],value:e.value,backgroundColor:n[t],hoverBackgroundColor:A.default.lightenDarkenColor(n[t],-35)}})}}function i(e,t){e.querySelectorAll(".js-output")[0].innerHTML=t.map(function(e){return"<li>"+e.label+" - "+e.value+" shows</li>"}).join("\n")}function c(e){q.topGenre&&q.topGenre.destroy(),q.topGenre=v("pie",D,h(e,w))}function f(e){q.topTheme&&q.topTheme.destroy(),q.topTheme=v("pie",G,e.slice(0,x))}function p(e,t){q.types&&q.types.destroy(),e=e.map(function(e){var o=(0,T.default)({},e),n=e.value/A.default.getTotals()[t]*100;return n=n.toFixed(2),o.value=parseInt(n,10),o}),q.types=v("horizontalBar",I,e,"Types",{scales:{yAxes:[{stacked:!0,scaleLabel:{display:!0,labelString:"percent"},ticks:{max:100,beginAtZero:!0}}]}})}function v(e,t,o,n,r){var u=t.querySelectorAll(".js-output"),a=o.reduce(function(e,t){return e.labels.push(t.label),e.datasets[0].data.push(t.value),e.datasets[0].backgroundColor.push(t.backgroundColor),e.datasets[0].hoverBackgroundColor.push(t.hoverBackgroundColor),e},{labels:[],datasets:[{label:n,data:[],backgroundColor:[],hoverBackgroundColor:[]}]});return new j.default(u,{type:e,data:a,options:r})}function h(e,t){var o=e.slice(0,t),n=e.slice(t);return n=n.reduce(function(e,t){return{label:"Others",value:e.value+t.value,backgroundColor:e.backgroundColor||t.backgroundColor,hoverBackgroundColor:e.hoverBackgroundColor||t.hoverBackgroundColor}},{value:0}),o.push(n),o}function g(e){var t=e.key,o=A.default.getTotals(),n=A.default.getEpisodeTotals().tv;M.innerHTML="<li><strong>Number of shows:</strong> "+o[t]+"</li><li><strong>Average Episode Count:</strong> "+n[t]+"</li>"}function y(e){return'<option value="'+e+'">'+e+"</option>"}function b(){A.default.setupDownloads(),S.innerHTML=(0,k.default)(A.default.getTotals()).map(y).join("\n"),S.value=A.default.END_YEAR,S.removeAttribute("disabled"),u()}var m=o(23),k=n(m),C=o(17),T=n(C),B=o(55),j=n(B),E=o(36),A=n(E),w=10,x=20,D=void 0,G=void 0,I=void 0,_=void 0,L=void 0,M=void 0,S=void 0,q={topGenre:null,topTheme:null,types:null};!function(){D=A.default.printChart("topGenresChart","Top "+w+" Genres"),G=A.default.printChart("topThemesChart","Top "+x+" Themes"),I=A.default.printChart("typesChart","Type of shows (%)"),_=document.getElementById("topGenres"),L=document.getElementById("topThemes"),M=document.getElementById("yearDetails"),S=document.getElementById("year"),S.addEventListener("change",r),A.default.init().then(b)}()}},[264])});
//# sourceMappingURL=year.js.map